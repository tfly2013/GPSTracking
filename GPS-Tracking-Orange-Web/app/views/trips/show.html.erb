<div class="map-container">
  <div id="map"></div>
</div>
<div class="row">
  <% @trip.segments.order(:order).each_with_index do |segment,index| %>
    <h3><br>Segment <%= index + 1 %></br> 
      <br><%= "Transportation: #{segment.transportation}"%></br>
      <br><%= "Distance: #{segment.distance}"%></br>
      <br><%= "StartTime: #{segment.startTime}"%></br>
      <br><%= "EndTime: #{segment.endTime}"%></br>
      <br><%= "HighestSpeed: #{segment.highestSpeed}"%></br>
      <br><%= "AverageSpeed: #{segment.avgSpeed}"%></br>
      <br><%= link_to 'Edit', edit_trip_segment_path(@trip, segment), :class => 'btn btn-primary' %>
      <%= link_to 'Delete', trip_segment_path(@trip, segment), method: :delete, data: { confirm: 'Are you sure?'}, :class => 'btn btn-danger' %></br>
    </h3>
    <div class="cloumn">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Latitude</th>
            <th>Longitude</th>
            <th>Speed</th>
            <th>Accuracy</th>
            <th>Time</th>
          </tr>
        </thead>
        <tbody>
          <% segment.locations.order(:order).each do |location| %>
            <tr>
              <td><%= location.latitude %></td>
              <td><%= location.longitude %></td>
              <td><%= location.speed %></td>
              <td><%= location.accuracy %></td>
              <td><%= location.time %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% end %>
  <br />
  <%= link_to 'New', new_trip_segment_path(@trip), :class => 'btn btn-primary' %>
  <%= link_to 'Back', trips_path, :class => 'btn btn-info' %>
</div>
<div id="map-control">
  <h3>Trip</h3>
  <div role="form">
    <div id="accordion"></div>
    <br />
    <button class="btn btn-primary btn-sm" onclick="saveTrip()" title="All changes to each segment will be saved.">Save Trip</button>
  </div>
</div>
<script type="text/javascript">
  var trip =<%= raw @tripJson.to_json %>;
    var tripUrl = "<%= trip_path(@trip) %>";
    $(initMap());
</script>