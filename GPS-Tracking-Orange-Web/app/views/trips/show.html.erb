<div class="page-header">
	<h1>Trip</h1>
</div>
<div class="map-container row">
	<div class="cloumn" id="map"></div>
</div>

<div class="row">
	<% @trip.segments.each do |segment| %>
	<h3>Segment <%= @trip.segments.index(segment) + 1 %>
	<%= link_to 'Edit', edit_trip_segment_path(@trip, segment), :class => 'btn btn-primary' %>
	<%= link_to 'Delete', trip_segment_path(@trip, segment), method: :delete, data: { confirm: 'Are you sure?'}, :class => 'btn btn-danger' %></h3>
	<div class="cloumn">
		<table class="table table-striped">
			<thead>
				<tr>
					<th>Latitude</th>
					<th>Longitude</th>
					<th>Accuracy</th>
					<th>Time</th>
				</tr>
			</thead>
			<tbody>
				<% segment.locations.each do |location| %>
				<tr>
					<td><%= location.latitude %></td>
					<td><%= location.longitude %></td>
					<td><%= location.accuracy %></td>
					<td><%= location.time %></td>
				</tr>
				<% end %>
			</tbody>
		</table>
	</div>
	<% end %>
</div>

<script type="text/javascript">var coordinates =<%= raw @coordinates.to_json %>
	;
	$(initMap()); 
</script>

<%= link_to 'New', new_trip_segment_path(@trip), :class => 'btn btn-primary' %>
<%= link_to 'Back', trips_path, :class => 'btn btn-info' %>
